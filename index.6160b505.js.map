{"mappings":"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","sources":["index.js"],"sourcesContent":["const element = document.getElementById('element');\nconst grid = document.getElementById('grid');\nconst free = document.getElementById('free');\nconst error = document.getElementById('error');\nlet draggableElement = {};\n\nif (!element || !grid || !free || !error) {\n    document.body.innerHTML = 'Internal error, please contact with developers';\n    throw new Error('Internal error, please contact with developers');\n}\n\nfunction getRandomColor() {\n    return `#${Math.floor(Math.random() * 16777215).toString(16)}`;\n}\n\nfunction getTargetZone(clientX, clientY) {\n    const isPointerInZone = (coords) => {\n        return clientX >= coords.left && clientX <= coords.right && clientY >= coords.top && clientY <= coords.bottom;\n    };\n    if (isPointerInZone(grid.getBoundingClientRect())) {\n        return grid;\n    }\n    if (isPointerInZone(free.getBoundingClientRect())) {\n        return free;\n    }\n\n    return null;\n}\n\nfunction enterZone(zone) {\n    if (!zone) {\n        return;\n    }\n    try {\n        zone.classList.add(`${zone.id}_target`);\n    } catch (e) {\n        error.innerHTML = 'Internal error, please contact with developers';\n    }\n}\n\nfunction leaveZone(zone) {\n    if (!zone) {\n        return;\n    }\n    zone.classList.remove(`${zone.id}_target`);\n}\n\nfunction toggleGridScroll() {\n    try {\n        if (grid.scrollHeight > grid.clientHeight) {\n            grid.classList.add('grid_scroll');\n        } else {\n            grid.classList.remove('grid_scroll');\n        }\n    } catch (e) {\n        error.innerHTML = 'Internal error, please contact with developers';\n    }\n}\n\nfunction insertToZone(zone, elem) {\n    if (!elem || !zone) {\n        return;\n    }\n\n    const insertToGridZone = (elem) => {\n        elem.classList.remove('element_move');\n        grid.append(elem);\n        toggleGridScroll();\n    };\n\n    const insertToFreeZone = (elem) => {\n        // calc element position in free zone\n        const rect = free.getBoundingClientRect();\n        elem.style.left = `${parseFloat(elem.style.left) - rect.left - window.scrollX - 1}px`;\n        elem.style.top = `${parseFloat(elem.style.top) - rect.top - window.scrollY - 1}px`;\n        free.append(elem);\n    };\n\n    leaveZone(zone);\n    try {\n        if (zone === grid) {\n            insertToGridZone(elem);\n        }\n        if (zone === free) {\n            insertToFreeZone(elem);\n        }\n    } catch (e) {\n        error.innerHTML = 'Internal error, please contact with developers';\n    }\n}\n\nfunction findZonesToHighlight(clientX, clientY) {\n    leaveZone(grid);\n    leaveZone(free);\n\n    const targetZone = getTargetZone(clientX, clientY);\n    if (!targetZone) {\n        return;\n    }\n\n    enterZone(targetZone);\n}\n\nfunction moveAt(pageX, pageY) {\n    if (!draggableElement.elem) {\n        return;\n    }\n    draggableElement.elem.style.left = `${pageX - draggableElement.shiftX}px`;\n    draggableElement.elem.style.top = `${pageY - draggableElement.shiftY}px`;\n}\n\nfunction startDrag(pageX, pageY, pointerType) {\n    if (!draggableElement.elem) {\n        return;\n    }\n    try {\n        // turn off browser drag'n'drop\n        draggableElement.elem.addEventListener('dragstart', () => false);\n\n        // change element position and add to document body\n        draggableElement.elem.classList.add('element_move');\n        document.body.append(draggableElement.elem);\n\n        // add events\n        document.addEventListener('pointermove', documentPointerMoveHandler);\n        if (pointerType === 'touch') {\n            element.addEventListener('pointerup', elementPointerUpHandler);\n        } else {\n            draggableElement.elem.addEventListener('pointerup', elementPointerUpHandler);\n        }\n\n        // move to pointer position\n        moveAt(pageX, pageY);\n    } catch (e) {\n        error.innerHTML = 'Internal error, please contact with developers';\n    }\n}\n\nfunction documentPointerMoveHandler(event) {\n    moveAt(event.pageX, event.pageY);\n    findZonesToHighlight(event.clientX, event.clientY);\n}\n\nfunction elementPointerUpHandler(event) {\n    // remove events\n    document.removeEventListener('pointermove', documentPointerMoveHandler);\n    event.target.removeEventListener('pointerup', elementPointerUpHandler);\n\n    if (!draggableElement.elem) {\n        return;\n    }\n\n    const targetZone = getTargetZone(event.clientX, event.clientY);\n    if (!targetZone) {\n        draggableElement.elem.remove();\n    } else {\n        insertToZone(targetZone, draggableElement.elem);\n    }\n    draggableElement = {};\n}\n\nfunction elementPointerDownHandler(event) {\n    const targetElement = event.target;\n\n    // clone element to move in zones\n    const copy = targetElement.cloneNode(true);\n    copy.removeAttribute('id');\n\n    // change element color\n    targetElement.style.backgroundColor = getRandomColor();\n\n    // save shift of element to cursor\n    draggableElement.shiftX = event.clientX - targetElement.getBoundingClientRect().left;\n    draggableElement.shiftY = event.clientY - targetElement.getBoundingClientRect().top;\n\n    draggableElement.elem = copy;\n\n    startDrag(event.pageX, event.pageY, event.pointerType);\n}\n\nelement.addEventListener('pointerdown', elementPointerDownHandler);\n\nconst resizeObserver = new ResizeObserver(() => {\n    toggleGridScroll();\n});\n\nresizeObserver.observe(grid);\n"],"names":["$dad545c909cfec2d$var$element","document","getElementById","$dad545c909cfec2d$var$grid","$dad545c909cfec2d$var$free","$dad545c909cfec2d$var$error","$dad545c909cfec2d$var$draggableElement","body","innerHTML","Error","$dad545c909cfec2d$var$getTargetZone","clientX","clientY","isPointerInZone","coords","left","right","top","bottom","getBoundingClientRect","$dad545c909cfec2d$var$leaveZone","zone","classList","remove","id","$dad545c909cfec2d$var$toggleGridScroll","scrollHeight","clientHeight","add","e","$dad545c909cfec2d$var$insertToZone","elem","append","insertToGridZone","rect","style","parseFloat","window","scrollX","scrollY","insertToFreeZone","$dad545c909cfec2d$var$findZonesToHighlight","targetZone","$dad545c909cfec2d$var$enterZone","$dad545c909cfec2d$var$moveAt","pageX","pageY","shiftX","shiftY","$dad545c909cfec2d$var$documentPointerMoveHandler","event","$dad545c909cfec2d$var$elementPointerUpHandler","removeEventListener","target","addEventListener","targetElement","copy","cloneNode","removeAttribute","backgroundColor","Math","floor","random","toString","pointerType","$dad545c909cfec2d$var$startDrag","ResizeObserver","observe"],"version":3,"file":"index.6160b505.js.map"}